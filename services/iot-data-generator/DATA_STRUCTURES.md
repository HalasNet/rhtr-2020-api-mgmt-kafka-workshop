# Data Structures

This section contains samples of data that is generated by the parking meter
and junction sensors and sent to AMQ Streams. Lab attendees need to consume
this data, persist it in PostgreSQL and use it in their HTTP API responses,
as detailed later in this document.

## IoT Sensor Data inputs AMQ Streams

These are the data payloads that will be available via AMQ Streams for
processing.

### Junction/Traffic Sensors

Junction sensors flush their counters every minute. Flushing a counter means
they reset their internal count to 0, and send a JSON payload to an AMQ Streams
broker. 

The JSON payload is as follows:

```js
{
  // The meter identifier. The junctionId corresponds to those in the city's
  // meter_info table in the city-info database
  "junctionId": 35,
  
  // When the payload was sent from this sensor (milliseconds since epoch)
  "timestamp": 1566432096257,

  // How many cars passed east-west and north-south directions at this
  // junction in the last minute
  "counts": {
    "ew": 2,
    "ns": 5
  }
}
```

### Parking Sensors

Parking sensors send their state once every minute. The JSON payload is as
follows:

```js
{
  // The meter identifier. The meterId corresponds to those in the city's
  // meter_info table in the city-info database
  "meterId": 62,
  
  // When the payload was sent from this sensor
  "timestamp": 1566432096257,

  // Can be "available", "occupied", "unknown", or "out-of-service"
  "status": "available"
}
```
